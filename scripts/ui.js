import{a as Tt}from"./chunks/chunk-CDYYVZ3W.js";import{d as ln,e as an,f as cn,g as un}from"./chunks/chunk-FOZYM4XD.js";import{A as zt,Aa as on,B as ne,C as y,Ca as V,D as pe,Da as sn,E as Nt,F as Gt,G as Vt,H as Ht,I as Ut,J as $t,K as Jt,M as Kt,O as G,P as re,Q as Qt,R as Xt,S as ge,a as Ve,b as T,c as It,d as Pt,e as Rt,fa as ye,g as Ft,h as Ot,ha as Yt,i as m,ia as a,j as P,ja as oe,k as z,ka as xe,l as _t,la as ie,m as J,ma as Ue,n as He,na as $e,o as S,p as de,q as v,r as R,s as N,sa as Zt,v as Wt,va as en,w as me,wa as tn,x as jt,y as x,ya as nn,z as qt,za as rn}from"./chunks/chunk-Z4KE7LMM.js";var Tr=e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=et(e.state,n.from);return r.line?Ir(e):r.block?Rr(e):!1};function Ze(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=e(t,n);return o?(r(n.update(o)),!0):!1}}var Ir=Ze(_r,0);var Pr=Ze(xn,0);var Rr=Ze((e,t)=>xn(e,t,Or(t)),0);function et(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}var se=50;function Fr(e,{open:t,close:n},r,o){let i=e.sliceDoc(r-se,r),s=e.sliceDoc(o,o+se),l=/\s*$/.exec(i)[0].length,c=/^\s*/.exec(s)[0].length,f=i.length-l;if(i.slice(f-t.length,f)==t&&s.slice(c,c+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:o+c,margin:c&&1}};let h,d;o-r<=2*se?h=d=e.sliceDoc(r,o):(h=e.sliceDoc(r,r+se),d=e.sliceDoc(o-se,o));let g=/^\s*/.exec(h)[0].length,q=/\s*$/.exec(d)[0].length,E=d.length-q-n.length;return h.slice(g,g+t.length)==t&&d.slice(E,E+n.length)==n?{open:{pos:r+g+t.length,margin:/\s/.test(h.charAt(g+t.length))?1:0},close:{pos:o-q-n.length,margin:/\s/.test(d.charAt(E-1))?1:0}}:null}function Or(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=n.to<=r.to?r:e.doc.lineAt(n.to),i=t.length-1;i>=0&&t[i].to>r.from?t[i].to=o.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:o.to})}return t}function xn(e,t,n=t.selection.ranges){let r=n.map(i=>et(t,i.from).block);if(!r.every(i=>i))return null;let o=n.map((i,s)=>Fr(t,r[s],i.from,i.to));if(e!=2&&!o.every(i=>i))return{changes:t.changes(n.map((i,s)=>o[s]?[]:[{from:i.from,insert:r[s].open+" "},{from:i.to,insert:" "+r[s].close}]))};if(e!=1&&o.some(i=>i)){let i=[];for(let s=0,l;s<o.length;s++)if(l=o[s]){let c=r[s],{open:f,close:h}=l;i.push({from:f.pos-c.open.length,to:f.pos+f.margin},{from:h.pos-h.margin,to:h.pos+c.close.length})}return{changes:i}}return null}function _r(e,t,n=t.selection.ranges){let r=[],o=-1;for(let{from:i,to:s}of n){let l=r.length,c=1e9,f=et(t,i).line;if(f){for(let h=i;h<=s;){let d=t.doc.lineAt(h);if(d.from>o&&(i==s||s>d.from)){o=d.from;let g=/^\s*/.exec(d.text)[0].length,q=g==d.length,E=d.text.slice(g,g+f.length)==f?g:-1;g<d.text.length&&g<c&&(c=g),r.push({line:d,comment:E,token:f,indent:g,empty:q,single:!1})}h=d.to+1}if(c<1e9)for(let h=l;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=c);r.length==l+1&&(r[l].single=!0)}}if(e!=2&&r.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:l,token:c,indent:f,empty:h,single:d}of r)(d||!h)&&i.push({from:l.from+f,insert:c+" "});let s=t.changes(i);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&r.some(i=>i.comment>=0)){let i=[];for(let{line:s,comment:l,token:c}of r)if(l>=0){let f=s.from+l,h=f+c.length;s.text[h-s.from]==" "&&h++,i.push({from:f,to:h})}return{changes:i}}return null}var Ke=He.define(),Wr=He.define(),jr=P.define(),kn=P.define({combine(e){return N(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(r,o)=>t(r,o)||n(r,o)})}}),bn=z.define({create(){return H.empty},update(e,t){let n=t.state.facet(kn),r=t.annotation(Ke);if(r){let c=M.fromTransaction(t,r.selection),f=r.side,h=f==0?e.undone:e.done;return c?h=be(h,h.length,n.minDepth,c):h=Ln(h,t.startState.selection),new H(f==0?r.rest:h,f==0?h:r.rest)}let o=t.annotation(Wr);if((o=="full"||o=="before")&&(e=e.isolate()),t.annotation(de.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let i=M.fromTransaction(t),s=t.annotation(de.time),l=t.annotation(de.userEvent);return i?e=e.addChanges(i,s,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,l,n.newGroupDelay)),(o=="full"||o=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new H(e.done.map(M.fromJSON),e.undone.map(M.fromJSON))}});function Sn(e={}){return[bn,kn.of(e),y.domEventHandlers({beforeinput(t,n){let r=t.inputType=="historyUndo"?vn:t.inputType=="historyRedo"?Qe:null;return r?(t.preventDefault(),r(n)):!1}})]}function Se(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let o=n.field(bn,!1);if(!o)return!1;let i=o.pop(e,n,t);return i?(r(i),!0):!1}}var vn=Se(0,!1),Qe=Se(1,!1),qr=Se(0,!0),zr=Se(1,!0);var M=class e{constructor(t,n,r,o,i){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=o,this.selectionsAfter=i}setSelAfter(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(t){return new e(t.changes&&Ot.fromJSON(t.changes),[],t.mapped&&Ft.fromJSON(t.mapped),t.startSelection&&m.fromJSON(t.startSelection),t.selectionsAfter.map(m.fromJSON))}static fromTransaction(t,n){let r=C;for(let o of t.startState.facet(jr)){let i=o(t);i.length&&(r=r.concat(i))}return!r.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,C)}static selection(t){return new e(void 0,C,void 0,void 0,t)}};function be(e,t,n,r){let o=t+1>n+20?t-n-1:0,i=e.slice(o,t);return i.push(r),i}function Nr(e,t){let n=[],r=!1;return e.iterChangedRanges((o,i)=>n.push(o,i)),t.iterChangedRanges((o,i,s,l)=>{for(let c=0;c<n.length;){let f=n[c++],h=n[c++];l>=f&&s<=h&&(r=!0)}}),r}function Gr(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n,r)=>n.empty!=t.ranges[r].empty).length===0}function wn(e,t){return e.length?t.length?e.concat(t):e:t}var C=[],Vr=200;function Ln(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Vr));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),be(e,e.length-1,1e9,n.setSelAfter(r)))}else return[M.selection([t])]}function Hr(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function Je(e,t){if(!e.length)return e;let n=e.length,r=C;for(;n;){let o=Ur(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let i=e.slice(0,n);return i[n-1]=o,i}else t=o.mapped,n--,r=o.selectionsAfter}return r.length?[M.selection(r)]:C}function Ur(e,t,n){let r=wn(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):C,n);if(!e.changes)return M.selection(r);let o=e.changes.map(t),i=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(i):i;return new M(o,S.mapEffects(e.effects,t),s,e.startSelection.map(i),r)}var $r=/^(input\.type|delete)($|\.)/,H=class e{constructor(t,n,r=0,o=void 0){this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=o}isolate(){return this.prevTime?new e(this.done,this.undone):this}addChanges(t,n,r,o,i){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!r||$r.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(i,Nr(l.changes,t.changes))||r=="input.type.compose")?s=be(s,s.length-1,o.minDepth,new M(t.changes.compose(l.changes),wn(S.mapEffects(t.effects,l.changes),l.effects),l.mapped,l.startSelection,C)):s=be(s,s.length,o.minDepth,t),new e(s,C,n,r)}addSelection(t,n,r,o){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:C;return i.length>0&&n-this.prevTime<o&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Gr(i[i.length-1],t)?this:new e(Ln(this.done,t),this.undone,n,r)}addMapping(t){return new e(Je(this.done,t),Je(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,r){let o=t==0?this.done:this.undone;if(o.length==0)return null;let i=o[o.length-1],s=i.selectionsAfter[0]||n.selection;if(r&&i.selectionsAfter.length)return n.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Ke.of({side:t,rest:Hr(o),selection:s}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let l=o.length==1?C:o.slice(0,o.length-1);return i.mapped&&(l=Je(l,i.mapped)),n.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Ke.of({side:t,rest:l,selection:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}};H.empty=new H(C,C);var Cn=[{key:"Mod-z",run:vn,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Qe,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Qe,preventDefault:!0},{key:"Mod-u",run:qr,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:zr,preventDefault:!0}];function K(e,t){return m.create(e.ranges.map(t),e.mainIndex)}function D(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function B({state:e,dispatch:t},n){let r=K(e.selection,n);return r.eq(e.selection,!0)?!1:(t(D(e,r)),!0)}function ve(e,t){return m.cursor(t?e.to:e.from)}function An(e,t){return B(e,n=>n.empty?e.moveByChar(n,t):ve(n,t))}function k(e){return e.textDirectionAt(e.state.selection.main.head)==qt.LTR}var Mn=e=>An(e,!k(e)),Bn=e=>An(e,k(e));function Dn(e,t){return B(e,n=>n.empty?e.moveByGroup(n,t):ve(n,t))}var Jr=e=>Dn(e,!k(e)),Kr=e=>Dn(e,k(e));var Fi=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Qr(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function we(e,t,n){let r=ye(e).resolveInner(t.head),o=n?ge.closedBy:ge.openedBy;for(let c=t.head;;){let f=n?r.childAfter(c):r.childBefore(c);if(!f)break;Qr(e,f,o)?r=f:c=n?f.to:f.from}let i=r.type.prop(o),s,l;return i&&(s=n?V(e,r.from,1):V(e,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,m.cursor(l,n?-1:1)}var Xr=e=>B(e,t=>we(e.state,t,!k(e))),Yr=e=>B(e,t=>we(e.state,t,k(e)));function En(e,t){return B(e,n=>{if(!n.empty)return ve(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}var Tn=e=>En(e,!1),In=e=>En(e,!0);function Pn(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,o;if(t){for(let i of e.state.facet(y.scrollMargins)){let s=i(e);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}o=e.scrollDOM.clientHeight-n-r}else o=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,o-5)}}function Rn(e,t){let n=Pn(e),{state:r}=e,o=K(r.selection,s=>s.empty?e.moveVertically(s,t,n.height):ve(s,t));if(o.eq(r.selection))return!1;let i;if(n.selfScroll){let s=e.coordsAtPos(r.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),c=l.top+n.marginTop,f=l.bottom-n.marginBottom;s&&s.top>c&&s.bottom<f&&(i=y.scrollIntoView(o.main.head,{y:"start",yMargin:s.top-c}))}return e.dispatch(D(r,o),{effects:i}),!0}var fn=e=>Rn(e,!1),Xe=e=>Rn(e,!0);function F(e,t,n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head!=r.from+i&&(o=m.cursor(r.from+i))}return o}var Zr=e=>B(e,t=>F(e,t,!0)),eo=e=>B(e,t=>F(e,t,!1)),to=e=>B(e,t=>F(e,t,!k(e))),no=e=>B(e,t=>F(e,t,k(e))),ro=e=>B(e,t=>m.cursor(e.lineBlockAt(t.head).from,1)),oo=e=>B(e,t=>m.cursor(e.lineBlockAt(t.head).to,-1));function io(e,t,n){let r=!1,o=K(e.selection,i=>{let s=V(e,i.head,-1)||V(e,i.head,1)||i.head>0&&V(e,i.head-1,1)||i.head<e.doc.length&&V(e,i.head+1,-1);if(!s||!s.end)return i;r=!0;let l=s.start.from==i.head?s.end.to:s.end.from;return n?m.range(i.anchor,l):m.cursor(l)});return r?(t(D(e,o)),!0):!1}var so=({state:e,dispatch:t})=>io(e,t,!1);function A(e,t){let n=K(e.state.selection,r=>{let o=t(r);return m.range(r.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(e.state.selection)?!1:(e.dispatch(D(e.state,n)),!0)}function Fn(e,t){return A(e,n=>e.moveByChar(n,t))}var On=e=>Fn(e,!k(e)),_n=e=>Fn(e,k(e));function Wn(e,t){return A(e,n=>e.moveByGroup(n,t))}var lo=e=>Wn(e,!k(e)),ao=e=>Wn(e,k(e));var co=e=>A(e,t=>we(e.state,t,!k(e))),uo=e=>A(e,t=>we(e.state,t,k(e)));function jn(e,t){return A(e,n=>e.moveVertically(n,t))}var qn=e=>jn(e,!1),zn=e=>jn(e,!0);function Nn(e,t){return A(e,n=>e.moveVertically(n,t,Pn(e).height))}var hn=e=>Nn(e,!1),dn=e=>Nn(e,!0),fo=e=>A(e,t=>F(e,t,!0)),ho=e=>A(e,t=>F(e,t,!1)),mo=e=>A(e,t=>F(e,t,!k(e))),po=e=>A(e,t=>F(e,t,k(e))),go=e=>A(e,t=>m.cursor(e.lineBlockAt(t.head).from)),yo=e=>A(e,t=>m.cursor(e.lineBlockAt(t.head).to)),mn=({state:e,dispatch:t})=>(t(D(e,{anchor:0})),!0),pn=({state:e,dispatch:t})=>(t(D(e,{anchor:e.doc.length})),!0),gn=({state:e,dispatch:t})=>(t(D(e,{anchor:e.selection.main.anchor,head:0})),!0),yn=({state:e,dispatch:t})=>(t(D(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),xo=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),ko=({state:e,dispatch:t})=>{let n=Le(e).map(({from:r,to:o})=>m.range(r,Math.min(o+1,e.doc.length)));return t(e.update({selection:m.create(n),userEvent:"select"})),!0},bo=({state:e,dispatch:t})=>{let n=K(e.selection,r=>{var o;let i=ye(e).resolveStack(r.from,1);for(let s=i;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&(!((o=l.parent)===null||o===void 0)&&o.parent))return m.range(l.to,l.from)}return r});return t(D(e,n)),!0},So=({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=m.create([n.main]):n.main.empty||(r=m.create([m.cursor(n.main.head)])),r?(t(D(e,r)),!0):!1};function le(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange(i=>{let{from:s,to:l}=i;if(s==l){let c=t(i);c<s?(n="delete.backward",c=ke(e,c,!1)):c>s&&(n="delete.forward",c=ke(e,c,!0)),s=Math.min(s,c),l=Math.max(l,c)}else s=ke(e,s,!1),l=ke(e,l,!0);return s==l?{range:i}:{changes:{from:s,to:l},range:m.cursor(s,s<i.head?-1:1)}});return o.changes.empty?!1:(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?y.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function ke(e,t,n){if(e instanceof y)for(let r of e.state.facet(y.atomicRanges).map(o=>o(e)))r.between(t,t,(o,i)=>{o<t&&i>t&&(t=n?i:o)});return t}var Gn=(e,t,n)=>le(e,r=>{let o=r.from,{state:i}=e,s=i.doc.lineAt(o),l,c;if(n&&!t&&o>s.from&&o<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,o-s.from))){if(l[l.length-1]=="	")return o-1;let f=me(l,i.tabSize),h=f%xe(i)||xe(i);for(let d=0;d<h&&l[l.length-1-d]==" ";d++)o--;c=o}else c=T(s.text,o-s.from,t,t)+s.from,c==o&&s.number!=(t?i.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,o-s.from))&&(c=T(s.text,c-s.from,!1,!1)+s.from);return c}),Ye=e=>Gn(e,!1,!0);var Vn=e=>Gn(e,!0,!1),Hn=(e,t)=>le(e,n=>{let r=n.head,{state:o}=e,i=o.doc.lineAt(r),s=o.charCategorizer(r);for(let l=null;;){if(r==(t?i.to:i.from)){r==n.head&&i.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let c=T(i.text,r-i.from,t)+i.from,f=i.text.slice(Math.min(r,c)-i.from,Math.max(r,c)-i.from),h=s(f);if(l!=null&&h!=l)break;(f!=" "||r!=n.head)&&(l=h),r=c}return r}),Un=e=>Hn(e,!1),vo=e=>Hn(e,!0),wo=e=>le(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)});var Lo=e=>le(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),Co=e=>le(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)});var Ao=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ve.of(["",""])},range:m.cursor(r.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Mo=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{if(!r.empty||r.from==0||r.from==e.doc.length)return{range:r};let o=r.from,i=e.doc.lineAt(o),s=o==i.from?o-1:T(i.text,o-i.from,!1)+i.from,l=o==i.to?o+1:T(i.text,o-i.from,!0)+i.from;return{changes:{from:s,to:l,insert:e.doc.slice(o,l).append(e.doc.slice(s,o))},range:m.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Le(e){let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.from),i=e.doc.lineAt(r.to);if(!r.empty&&r.to==i.from&&(i=e.doc.lineAt(r.to-1)),n>=o.number){let s=t[t.length-1];s.to=i.to,s.ranges.push(r)}else t.push({from:o.from,to:i.to,ranges:[r]});n=i.number+1}return t}function $n(e,t,n){if(e.readOnly)return!1;let r=[],o=[];for(let i of Le(e)){if(n?i.to==e.doc.length:i.from==0)continue;let s=e.doc.lineAt(n?i.to+1:i.from-1),l=s.length+1;if(n){r.push({from:i.to,to:s.to},{from:i.from,insert:s.text+e.lineBreak});for(let c of i.ranges)o.push(m.range(Math.min(e.doc.length,c.anchor+l),Math.min(e.doc.length,c.head+l)))}else{r.push({from:s.from,to:i.from},{from:i.to,insert:e.lineBreak+s.text});for(let c of i.ranges)o.push(m.range(c.anchor-l,c.head-l))}}return r.length?(t(e.update({changes:r,scrollIntoView:!0,selection:m.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Bo=({state:e,dispatch:t})=>$n(e,t,!1),Do=({state:e,dispatch:t})=>$n(e,t,!0);function Jn(e,t,n){if(e.readOnly)return!1;let r=[];for(let o of Le(e))n?r.push({from:o.from,insert:e.doc.slice(o.from,o.to)+e.lineBreak}):r.push({from:o.to,insert:e.lineBreak+e.doc.slice(o.from,o.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var Eo=({state:e,dispatch:t})=>Jn(e,t,!1),To=({state:e,dispatch:t})=>Jn(e,t,!0),Io=e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Le(t).map(({from:o,to:i})=>(o>0?o--:i<t.doc.length&&i++,{from:o,to:i}))),r=K(t.selection,o=>{let i;if(e.lineWrapping){let s=e.lineBlockAt(o.head),l=e.coordsAtPos(o.head,o.assoc||1);l&&(i=s.bottom+e.documentTop-l.bottom+e.defaultLineHeight/2)}return e.moveVertically(o,!0,i)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Po(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=ye(e).resolveInner(t),r=n.childBefore(t),o=n.childAfter(t),i;return r&&o&&r.to<=t&&o.from>=t&&(i=r.type.prop(ge.closedBy))&&i.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}var Ro=Kn(!1),Fo=Kn(!0);function Kn(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(o=>{let{from:i,to:s}=o,l=t.doc.lineAt(i),c=!e&&i==s&&Po(t,i);e&&(i=s=(s<=l.to?l:t.doc.lineAt(s)).to);let f=new $e(t,{simulateBreak:i,simulateDoubleBreak:!!c}),h=Ue(f,i);for(h==null&&(h=me(/^\s*/.exec(t.doc.lineAt(i).text)[0],t.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;c?{from:i,to:s}=c:i>l.from&&i<l.from+100&&!/\S/.test(l.text.slice(0,i))&&(i=l.from);let d=["",ie(t,h)];return c&&d.push(ie(t,f.lineIndent(l.from,-1))),{changes:{from:i,to:s,insert:Ve.of(d)},range:m.cursor(i+1+d[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function tt(e,t){let n=-1;return e.changeByRange(r=>{let o=[];for(let s=r.from;s<=r.to;){let l=e.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(t(l,o,r),n=l.number),s=l.to+1}let i=e.changes(o);return{changes:o,range:m.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}var Oo=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new $e(e,{overrideIndentation:i=>{let s=n[i];return s??-1}}),o=tt(e,(i,s,l)=>{let c=Ue(r,i.from);if(c==null)return;/\S/.test(i.text)||(c=0);let f=/^\s*/.exec(i.text)[0],h=ie(e,c);(f!=h||l.from<i.from+f.length)&&(n[i.from]=c,s.push({from:i.from,to:i.from+f.length,insert:h}))});return o.changes.empty||t(e.update(o,{userEvent:"indent"})),!0},Qn=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(tt(e,(n,r)=>{r.push({from:n.from,insert:e.facet(oe)})}),{userEvent:"input.indent"})),!0),Xn=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(tt(e,(n,r)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let i=me(o,e.tabSize),s=0,l=ie(e,Math.max(0,i-xe(e)));for(;s<o.length&&s<l.length&&o.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+o.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),_o=e=>(e.setTabFocusMode(),!0);var Wo=[{key:"Ctrl-b",run:Mn,shift:On,preventDefault:!0},{key:"Ctrl-f",run:Bn,shift:_n},{key:"Ctrl-p",run:Tn,shift:qn},{key:"Ctrl-n",run:In,shift:zn},{key:"Ctrl-a",run:ro,shift:go},{key:"Ctrl-e",run:oo,shift:yo},{key:"Ctrl-d",run:Vn},{key:"Ctrl-h",run:Ye},{key:"Ctrl-k",run:wo},{key:"Ctrl-Alt-h",run:Un},{key:"Ctrl-o",run:Ao},{key:"Ctrl-t",run:Mo},{key:"Ctrl-v",run:Xe}],jo=[{key:"ArrowLeft",run:Mn,shift:On,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Jr,shift:lo,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:to,shift:mo,preventDefault:!0},{key:"ArrowRight",run:Bn,shift:_n,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Kr,shift:ao,preventDefault:!0},{mac:"Cmd-ArrowRight",run:no,shift:po,preventDefault:!0},{key:"ArrowUp",run:Tn,shift:qn,preventDefault:!0},{mac:"Cmd-ArrowUp",run:mn,shift:gn},{mac:"Ctrl-ArrowUp",run:fn,shift:hn},{key:"ArrowDown",run:In,shift:zn,preventDefault:!0},{mac:"Cmd-ArrowDown",run:pn,shift:yn},{mac:"Ctrl-ArrowDown",run:Xe,shift:dn},{key:"PageUp",run:fn,shift:hn},{key:"PageDown",run:Xe,shift:dn},{key:"Home",run:eo,shift:ho,preventDefault:!0},{key:"Mod-Home",run:mn,shift:gn},{key:"End",run:Zr,shift:fo,preventDefault:!0},{key:"Mod-End",run:pn,shift:yn},{key:"Enter",run:Ro},{key:"Mod-a",run:xo},{key:"Backspace",run:Ye,shift:Ye},{key:"Delete",run:Vn},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Un},{key:"Mod-Delete",mac:"Alt-Delete",run:vo},{mac:"Mod-Backspace",run:Lo},{mac:"Mod-Delete",run:Co}].concat(Wo.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),Yn=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Xr,shift:co},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Yr,shift:uo},{key:"Alt-ArrowUp",run:Bo},{key:"Shift-Alt-ArrowUp",run:Eo},{key:"Alt-ArrowDown",run:Do},{key:"Shift-Alt-ArrowDown",run:To},{key:"Escape",run:So},{key:"Mod-Enter",run:Fo},{key:"Alt-l",mac:"Ctrl-l",run:ko},{key:"Mod-i",run:bo,preventDefault:!0},{key:"Mod-[",run:Xn},{key:"Mod-]",run:Qn},{key:"Mod-Alt-\\",run:Oo},{key:"Shift-Mod-k",run:Io},{key:"Shift-Mod-\\",run:so},{key:"Mod-/",run:Tr},{key:"Alt-A",run:Pr},{key:"Ctrl-m",mac:"Shift-Alt-m",run:_o}].concat(jo),Zn={key:"Tab",run:Qn,shift:Xn};function p(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];typeof o=="string"?e.setAttribute(r,o):o!=null&&(e[r]=o)}t++}for(;t<arguments.length;t++)er(e,arguments[t]);return e}function er(e,t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)er(e,t[n]);else throw new RangeError("Unsupported child node: "+t)}var tr=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e,_=class{constructor(t,n,r=0,o=t.length,i,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,o),this.bufferStart=r,this.normalize=i?l=>i(tr(l)):tr,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return It(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let n=Pt(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=Rt(t);let o=this.normalize(n);for(let i=0,s=r;;i++){let l=o.charCodeAt(i),c=this.match(l,s);if(c)return this.value=c,this;if(i==o.length-1)break;s==r&&i<n.length&&n.charCodeAt(i)==l&&s++}}}match(t,n){let r=null;for(let o=0;o<this.matches.length;o+=2){let i=this.matches[o],s=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?r={from:this.matches[o+1],to:n+1}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}};typeof Symbol<"u"&&(_.prototype[Symbol.iterator]=function(){return this});var ir={from:-1,to:-1,match:/.*/.exec("")},at="gm"+(/x/.unicode==null?"":"u"),Me=class{constructor(t,n,r,o=0,i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=ir,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new De(t,n,r,o,i);this.re=new RegExp(n,at+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=t.iter();let s=t.lineAt(o);this.curLineStart=s.from,this.matchPos=Ee(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,o=r+n[0].length;if(this.matchPos=Ee(this.text,o+(r==o?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<o||r>this.value.to)&&(!this.test||this.test(r,o,n)))return this.value={from:r,to:o,match:n},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}},nt=new WeakMap,Be=class e{constructor(t,n){this.from=t,this.text=n}get to(){return this.from+this.text.length}static get(t,n,r){let o=nt.get(t);if(!o||o.from>=r||o.to<=n){let l=new e(n,t.sliceString(n,r));return nt.set(t,l),l}if(o.from==n&&o.to==r)return o;let{text:i,from:s}=o;return s>n&&(i=t.sliceString(n,s)+i,s=n),o.to<r&&(i+=t.sliceString(o.to,r)),nt.set(t,new e(s,i)),new e(n,i.slice(n-s,r-s))}},De=class{constructor(t,n,r,o,i){this.text=t,this.to=i,this.done=!1,this.value=ir,this.matchPos=Ee(t,o),this.re=new RegExp(n,at+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Be.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==t&&(this.re.lastIndex=t+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,o=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,o,n)))return this.value={from:r,to:o,match:n},this.matchPos=Ee(this.text,o+(r==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Be.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=De.prototype[Symbol.iterator]=function(){return this});function qo(e){try{return new RegExp(e,at),!0}catch{return!1}}function Ee(e,t){if(t>=e.length)return t;let n=e.lineAt(t),r;for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function rt(e){let t=p("input",{class:"cm-textfield",name:"line"}),n=p("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),e.dispatch({effects:Te.of(!1)}),e.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},p("label",e.state.phrase("Go to line"),": ",t)," ",p("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:i}=e,s=i.doc.lineAt(i.selection.main.head),[,l,c,f,h]=o,d=f?+f.slice(1):0,g=c?+c:s.number;if(c&&h){let E=g/100;l&&(E=E*(l=="-"?-1:1)+s.number/i.doc.lines),g=Math.round(i.doc.lines*E)}else c&&l&&(g=g*(l=="-"?-1:1)+s.number);let q=i.doc.line(Math.max(1,Math.min(i.doc.lines,g)));e.dispatch({effects:Te.of(!1),selection:m.cursor(q.from+Math.max(0,Math.min(d,q.length))),scrollIntoView:!0}),e.focus()}return{dom:n}}var Te=S.define(),nr=z.define({create(){return!0},update(e,t){for(let n of t.effects)n.is(Te)&&(e=n.value);return e},provide:e=>re.from(e,t=>t?rt:null)}),zo=e=>{let t=G(e,rt);if(!t){let n=[Te.of(!0)];e.state.field(nr,!1)==null&&n.push(S.appendConfig.of([nr,No])),e.dispatch({effects:n}),t=G(e,rt)}return t&&t.dom.querySelector("input").focus(),!0},No=y.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Go={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},sr=P.define({combine(e){return N(e,Go,{highlightWordAroundCursor:(t,n)=>t||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function lr(e){let t=[Jo,$o];return e&&t.push(sr.of(e)),t}var Vo=x.mark({class:"cm-selectionMatch"}),Ho=x.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function rr(e,t,n,r){return(n==0||e(t.sliceDoc(n-1,n))!=v.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=v.Word)}function Uo(e,t,n,r){return e(t.sliceDoc(n,n+1))==v.Word&&e(t.sliceDoc(r-1,r))==v.Word}var $o=ne.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(sr),{state:n}=e,r=n.selection;if(r.ranges.length>1)return x.none;let o=r.main,i,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return x.none;let c=n.wordAt(o.head);if(!c)return x.none;s=n.charCategorizer(o.head),i=n.sliceDoc(c.from,c.to)}else{let c=o.to-o.from;if(c<t.minSelectionLength||c>200)return x.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!(rr(s,n,o.from,o.to)&&Uo(s,n,o.from,o.to)))return x.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return x.none}let l=[];for(let c of e.visibleRanges){let f=new _(n.doc,i,c.from,c.to);for(;!f.next().done;){let{from:h,to:d}=f.value;if((!s||rr(s,n,h,d))&&(o.empty&&h<=o.from&&d>=o.to?l.push(Ho.range(h,d)):(h>=o.to||d<=o.from)&&l.push(Vo.range(h,d)),l.length>t.maxMatches))return x.none}}return x.set(l)}},{decorations:e=>e.decorations}),Jo=y.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Ko=({state:e,dispatch:t})=>{let{selection:n}=e,r=m.create(n.ranges.map(o=>e.wordAt(o.head)||m.cursor(o.head)),n.mainIndex);return r.eq(n)?!1:(t(e.update({selection:r})),!0)};function Qo(e,t){let{main:n,ranges:r}=e.selection,o=e.wordAt(n.head),i=o&&o.from==n.from&&o.to==n.to;for(let s=!1,l=new _(e.doc,t,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new _(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(c=>c.from==l.value.from))continue;if(i){let c=e.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}var Xo=({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(i=>i.from===i.to))return Ko({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(i=>e.sliceDoc(i.from,i.to)!=r))return!1;let o=Qo(e,r);return o?(t(e.update({selection:e.selection.addRange(m.range(o.from,o.to),!1),effects:y.scrollIntoView(o.to)})),!0):!1},ct=P.define({combine(e){return N(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new lt(t)})}});var Ie=class{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||qo(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new it(this):new ot(this)}getCursor(t,n=0,r){let o=t.doc?t:R.create({doc:t});return r==null&&(r=o.doc.length),this.regexp?X(this,o,n,r):Q(this,o,n,r)}},Pe=class{constructor(t){this.spec=t}};function Q(e,t,n,r){return new _(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:o=>o.toLowerCase(),e.wholeWord?Yo(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Yo(e,t){return(n,r,o,i)=>((i>n||i+o.length<r)&&(i=Math.max(0,n-2),o=e.sliceString(i,Math.min(e.length,r+2))),(t(Re(o,n-i))!=v.Word||t(Fe(o,n-i))!=v.Word)&&(t(Fe(o,r-i))!=v.Word||t(Re(o,r-i))!=v.Word))}var ot=class extends Pe{constructor(t){super(t)}nextMatch(t,n,r){let o=Q(this.spec,t,r,t.doc.length).nextOverlapping();return o.done&&(o=Q(this.spec,t,0,n).nextOverlapping()),o.done?null:o.value}prevMatchInRange(t,n,r){for(let o=r;;){let i=Math.max(n,o-1e4-this.spec.unquoted.length),s=Q(this.spec,t,i,o),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(i==n)return null;o-=1e4}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,n){let r=Q(this.spec,t,0,t.doc.length),o=[];for(;!r.next().done;){if(o.length>=n)return null;o.push(r.value)}return o}highlight(t,n,r,o){let i=Q(this.spec,t,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}};function X(e,t,n,r){return new Me(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?Zo(t.charCategorizer(t.selection.main.head)):void 0},n,r)}function Re(e,t){return e.slice(T(e,t,!1),t)}function Fe(e,t){return e.slice(t,T(e,t))}function Zo(e){return(t,n,r)=>!r[0].length||(e(Re(r.input,r.index))!=v.Word||e(Fe(r.input,r.index))!=v.Word)&&(e(Fe(r.input,r.index+r[0].length))!=v.Word||e(Re(r.input,r.index+r[0].length))!=v.Word)}var it=class extends Pe{nextMatch(t,n,r){let o=X(this.spec,t,r,t.doc.length).next();return o.done&&(o=X(this.spec,t,0,n).next()),o.done?null:o.value}prevMatchInRange(t,n,r){for(let o=1;;o++){let i=Math.max(n,r-o*1e4),s=X(this.spec,t,i,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(i==n||l.from>i+10))return l;if(i==n)return null}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?t.match[0]:r!="0"&&+r<t.match.length?t.match[r]:n))}matchAll(t,n){let r=X(this.spec,t,0,t.doc.length),o=[];for(;!r.next().done;){if(o.length>=n)return null;o.push(r.value)}return o}highlight(t,n,r,o){let i=X(this.spec,t,Math.max(0,n-250),Math.min(r+250,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}},ce=S.define(),ut=S.define(),O=z.define({create(e){return new ae(st(e).create(),null)},update(e,t){for(let n of t.effects)n.is(ce)?e=new ae(n.value.create(),e.panel):n.is(ut)&&(e=new ae(e.query,n.value?ft:null));return e},provide:e=>re.from(e,t=>t.panel)});var ae=class{constructor(t,n){this.query=t,this.panel=n}},ei=x.mark({class:"cm-searchMatch"}),ti=x.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ni=ne.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(O))}update(e){let t=e.state.field(O);(t!=e.startState.field(O)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return x.none;let{view:n}=this,r=new Wt;for(let o=0,i=n.visibleRanges,s=i.length;o<s;o++){let{from:l,to:c}=i[o];for(;o<s-1&&c>i[o+1].from-2*250;)c=i[++o].to;e.highlight(n.state,l,c,(f,h)=>{let d=n.state.selection.ranges.some(g=>g.from==f&&g.to==h);r.add(f,h,d?ti:ei)})}return r.finish()}},{decorations:e=>e.decorations});function ue(e){return t=>{let n=t.state.field(O,!1);return n&&n.query.spec.valid?e(t,n):ar(t)}}var Oe=ue((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);return r?(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:ht(e,r),userEvent:"select.search"}),!0):!1}),_e=ue((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,o=t.prevMatch(n,r,r);return o?(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:ht(e,o),userEvent:"select.search"}),!0):!1}),ri=ue((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!n||!n.length?!1:(e.dispatch({selection:m.create(n.map(r=>m.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),oi=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:o}=n.main,i=[],s=0;for(let l=new _(e.doc,e.sliceDoc(r,o));!l.next().done;){if(i.length>1e3)return!1;l.value.from==r&&(s=i.length),i.push(m.range(l.value.from,l.value.to))}return t(e.update({selection:m.create(i,s),userEvent:"select.search.matches"})),!0},or=ue((e,{query:t})=>{let{state:n}=e,{from:r,to:o}=n.selection.main;if(n.readOnly)return!1;let i=t.nextMatch(n,r,r);if(!i)return!1;let s=[],l,c,f=[];if(i.from==r&&i.to==o&&(c=n.toText(t.getReplacement(i)),s.push({from:i.from,to:i.to,insert:c}),i=t.nextMatch(n,i.from,i.to),f.push(y.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),i){let h=s.length==0||s[0].from>=i.to?0:i.to-i.from-c.length;l={anchor:i.from-h,head:i.to-h},f.push(ht(e,i))}return e.dispatch({changes:s,selection:l,scrollIntoView:!!l,effects:f,userEvent:"input.replace"}),!0}),ii=ue((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(o=>{let{from:i,to:s}=o;return{from:i,to:s,insert:t.getReplacement(o)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:y.announce.of(r),userEvent:"input.replace.all"}),!0});function ft(e){return e.state.facet(ct).createPanel(e)}function st(e,t){var n,r,o,i;let s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;let c=e.facet(ct);return new Ie({search:((n=t?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=t?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(o=t?.literal)!==null&&o!==void 0?o:c.literal,wholeWord:(i=t?.wholeWord)!==null&&i!==void 0?i:c.wholeWord})}var ar=e=>{let t=e.state.field(O,!1);if(t&&t.panel){let n=G(e,ft);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=e.root.activeElement){let o=st(e.state,t.query.spec);o.valid&&e.dispatch({effects:ce.of(o)}),r.focus(),r.select()}}else e.dispatch({effects:[ut.of(!0),t?ce.of(st(e.state,t.query.spec)):S.appendConfig.of(li)]});return!0},cr=e=>{let t=e.state.field(O,!1);if(!t||!t.panel)return!1;let n=G(e,ft);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:ut.of(!1)}),!0},ur=[{key:"Mod-f",run:ar,scope:"editor search-panel"},{key:"F3",run:Oe,shift:_e,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Oe,shift:_e,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:cr,scope:"editor search-panel"},{key:"Mod-Shift-l",run:oi},{key:"Alt-g",run:zo},{key:"Mod-d",run:Xo,preventDefault:!0}],lt=class{constructor(t){this.view=t;let n=this.query=t.state.field(O).query.spec;this.commit=this.commit.bind(this),this.searchField=p("input",{value:n.search,placeholder:w(t,"Find"),"aria-label":w(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=p("input",{value:n.replace,placeholder:w(t,"Replace"),"aria-label":w(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=p("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=p("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=p("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(o,i,s){return p("button",{class:"cm-button",name:o,onclick:i,type:"button"},s)}this.dom=p("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,r("next",()=>Oe(t),[w(t,"next")]),r("prev",()=>_e(t),[w(t,"previous")]),r("select",()=>ri(t),[w(t,"all")]),p("label",null,[this.caseField,w(t,"match case")]),p("label",null,[this.reField,w(t,"regexp")]),p("label",null,[this.wordField,w(t,"by word")]),...t.state.readOnly?[]:[p("br"),this.replaceField,r("replace",()=>or(t),[w(t,"replace")]),r("replaceAll",()=>ii(t),[w(t,"replace all")])],p("button",{name:"close",onclick:()=>cr(t),"aria-label":w(t,"close"),type:"button"},["\xD7"])])}commit(){let t=new Ie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:ce.of(t)}))}keydown(t){Nt(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?_e:Oe)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),or(this.view))}update(t){for(let n of t.transactions)for(let r of n.effects)r.is(ce)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ct).top}};function w(e,t){return e.state.phrase(t)}var Ce=30,Ae=/[\s\.,:;?!]/;function ht(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),o=e.state.doc.lineAt(n).to,i=Math.max(r.from,t-Ce),s=Math.min(o,n+Ce),l=e.state.sliceDoc(i,s);if(i!=r.from){for(let c=0;c<Ce;c++)if(!Ae.test(l[c+1])&&Ae.test(l[c])){l=l.slice(c);break}}if(s!=o){for(let c=l.length-1;c>l.length-Ce;c--)if(!Ae.test(l[c-1])&&Ae.test(l[c])){l=l.slice(0,c);break}}return y.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${r.number}.`)}var si=y.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),li=[O,_t.lowest(ni),si];var mt=class{constructor(t,n,r){this.from=t,this.to=n,this.diagnostic=r}},U=class e{constructor(t,n,r){this.diagnostics=t,this.panel=n,this.selected=r}static init(t,n,r){let o=t,i=r.facet(Y).markerFilter;i&&(o=i(o));let s=x.set(o.map(l=>l.from==l.to||l.from==l.to-1&&r.doc.lineAt(l.from).to==l.from?x.widget({widget:new pt(l),diagnostic:l}).range(l.from):x.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new e(s,n,Z(s))}};function Z(e,t=null,n=0){let r=null;return e.between(n,1e9,(o,i,{spec:s})=>{if(!(t&&s.diagnostic!=t))return r=new mt(o,i,s.diagnostic),!1}),r}function ai(e,t){return!!(e.effects.some(n=>n.is(gt))||e.changes.touchesRange(t.pos))}function hr(e,t){return e.field(L,!1)?t:t.concat(S.appendConfig.of([L,y.decorations.compute([L],n=>{let{selected:r,panel:o}=n.field(L);return!r||!o||r.from==r.to?x.none:x.set([ui.range(r.from,r.to)])}),Kt(fi,{hideOn:ai}),yi]))}function ci(e,t){return{effects:hr(e,[gt.of(t)])}}var gt=S.define(),yt=S.define(),dr=S.define(),L=z.define({create(){return new U(x.none,null,null)},update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let o=t.changes.mapPos(e.selected.from,1);r=Z(n,e.selected.diagnostic,o)||Z(n,null,o)}e=new U(n,e.panel,r)}for(let n of t.effects)n.is(gt)?e=U.init(n.value,e.panel,t.state):n.is(yt)?e=new U(e.diagnostics,n.value?je.open:null,e.selected):n.is(dr)&&(e=new U(e.diagnostics,e.panel,n.value));return e},provide:e=>[re.from(e,t=>t.panel),y.decorations.from(e,t=>t.diagnostics)]});var ui=x.mark({class:"cm-lintRange cm-lintRange-active"});function fi(e,t,n){let{diagnostics:r}=e.state.field(L),o=[],i=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),(c,f,{spec:h})=>{t>=c&&t<=f&&(c==f||(t>c||n>0)&&(t<f||n<0))&&(o.push(h.diagnostic),i=Math.min(c,i),s=Math.max(f,s))});let l=e.state.facet(Y).tooltipFilter;return l&&(o=l(o)),o.length?{pos:i,end:s,above:e.state.doc.lineAt(i).to<s,create(){return{dom:hi(e,o)}}}:null}function hi(e,t){return p("ul",{class:"cm-tooltip-lint"},t.map(n=>gr(e,n,!1)))}var di=e=>{let t=e.state.field(L,!1);(!t||!t.panel)&&e.dispatch({effects:hr(e.state,[yt.of(!0)])});let n=G(e,je.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},fr=e=>{let t=e.state.field(L,!1);return!t||!t.panel?!1:(e.dispatch({effects:yt.of(!1)}),!0)},mi=e=>{let t=e.state.field(L,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},mr=[{key:"Mod-Shift-m",run:di,preventDefault:!0},{key:"F8",run:mi}],pi=ne.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(Y);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:t}=this.view,{sources:n}=t.facet(Y);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let o=r.reduce((i,s)=>i.concat(s));this.view.state.doc==t.doc&&this.view.dispatch(ci(this.view.state,o))},r=>{zt(this.view.state,r)})}}update(e){let t=e.state.facet(Y);(e.docChanged||t!=e.startState.facet(Y))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Y=P.define({combine(e){return Object.assign({sources:e.map(t=>t.source)},N(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:pi});function pr(e){let t=[];if(e)e:for(let{name:n}of e){for(let r=0;r<n.length;r++){let o=n[r];if(/[a-zA-Z]/.test(o)&&!t.some(i=>i.toLowerCase()==o.toLowerCase())){t.push(o);continue e}}t.push("")}return t}function gr(e,t,n){var r;let o=n?pr(t.actions):[];return p("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},p("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(r=t.actions)===null||r===void 0?void 0:r.map((i,s)=>{let l=d=>{d.preventDefault();let g=Z(e.state.field(L).diagnostics,t);g&&i.apply(e,g.from,g.to)},{name:c}=i,f=o[s]?c.indexOf(o[s]):-1,h=f<0?c:[c.slice(0,f),p("u",c.slice(f,f+1)),c.slice(f+1)];return p("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${f<0?"":` (access key "${o[s]})"`}.`},h)}),t.source&&p("div",{class:"cm-diagnosticSource"},t.source))}var pt=class extends jt{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return p("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},We=class{constructor(t,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=gr(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},je=class e{constructor(t){this.view=t,this.items=[];let n=o=>{if(o.keyCode==27)fr(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:i}=this.items[this.selectedIndex],s=pr(i.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==o.keyCode){let c=Z(this.view.state.field(L).diagnostics,i);c&&i.actions[l].apply(t,c.from,c.to)}}else return;o.preventDefault()},r=o=>{for(let i=0;i<this.items.length;i++)this.items[i].dom.contains(o.target)&&this.moveSelection(i)};this.list=p("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=p("div",{class:"cm-panel-lint"},this.list,p("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>fr(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(L).selected;if(!t)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==t.diagnostic)return n;return-1}update(){let{diagnostics:t,selected:n}=this.view.state.field(L),r=0,o=!1,i=null;for(t.between(0,this.view.state.doc.length,(s,l,{spec:c})=>{let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c.diagnostic){f=d;break}f<0?(h=new We(this.view,c.diagnostic),this.items.splice(r,0,h),o=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),o=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),i=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new We(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function n(){let r=t;t=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;t!=r.dom;)n();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t);for(;t;)n()}moveSelection(t){if(this.selectedIndex<0)return;let n=this.view.state.field(L),r=Z(n.diagnostics,this.items[t].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:dr.of(r)})}static open(t){return new e(t)}};function gi(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function dt(e){return gi(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var yi=y.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:dt("#d11")},".cm-lintRange-warning":{backgroundImage:dt("orange")},".cm-lintRange-info":{backgroundImage:dt("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var yr=[Qt(),Xt(),Ht(),Sn(),tn(),Gt(),Vt(),R.allowMultipleSelections.of(!0),Zt(),nn(rn,{fallback:!0}),on(),ln(),cn(),$t(),Jt(),Ut(),lr(),pe.of([...an,...Yn,...ur,...Cn,...en,...un,...mr])];function u(e){return new Yt(sn.define(e))}function W(e){return import("./chunks/dist-ENTATO32.js").then(t=>t.sql({dialect:t[e]}))}var xt=[a.of({name:"C",extensions:["c","h","ino"],load(){return import("./chunks/dist-V62YORQ5.js").then(e=>e.cpp())}}),a.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return import("./chunks/dist-V62YORQ5.js").then(e=>e.cpp())}}),a.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return W("Cassandra")}}),a.of({name:"CSS",extensions:["css"],load(){return import("./chunks/dist-NDRBQKUD.js").then(e=>e.css())}}),a.of({name:"Go",extensions:["go"],load(){return import("./chunks/dist-UFAHH4N5.js").then(e=>e.go())}}),a.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return import("./chunks/dist-QMRNCC4V.js").then(e=>e.html())}}),a.of({name:"Java",extensions:["java"],load(){return import("./chunks/dist-E7IGL4Z4.js").then(e=>e.java())}}),a.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return import("./chunks/dist-CZVE3DRA.js").then(e=>e.javascript())}}),a.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return import("./chunks/dist-EVET2TCP.js").then(e=>e.json())}}),a.of({name:"JSX",extensions:["jsx"],load(){return import("./chunks/dist-CZVE3DRA.js").then(e=>e.javascript({jsx:!0}))}}),a.of({name:"LESS",extensions:["less"],load(){return import("./chunks/dist-5BFKBTG3.js").then(e=>e.less())}}),a.of({name:"Liquid",extensions:["liquid"],load(){return import("./chunks/dist-U7W5RQMJ.js").then(e=>e.liquid())}}),a.of({name:"MariaDB SQL",load(){return W("MariaSQL")}}),a.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return import("./chunks/dist-FGHUHE4B.js").then(e=>e.markdown())}}),a.of({name:"MS SQL",load(){return W("MSSQL")}}),a.of({name:"MySQL",load(){return W("MySQL")}}),a.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return import("./chunks/dist-4DPZAO52.js").then(e=>e.php())}}),a.of({name:"PLSQL",extensions:["pls"],load(){return W("PLSQL")}}),a.of({name:"PostgreSQL",load(){return W("PostgreSQL")}}),a.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return import("./chunks/dist-G6XBCLKG.js").then(e=>e.python())}}),a.of({name:"Rust",extensions:["rs"],load(){return import("./chunks/dist-6MPEQWDB.js").then(e=>e.rust())}}),a.of({name:"Sass",extensions:["sass"],load(){return import("./chunks/dist-VWGDA6ZK.js").then(e=>e.sass({indented:!0}))}}),a.of({name:"SCSS",extensions:["scss"],load(){return import("./chunks/dist-VWGDA6ZK.js").then(e=>e.sass())}}),a.of({name:"SQL",extensions:["sql"],load(){return W("StandardSQL")}}),a.of({name:"SQLite",load(){return W("SQLite")}}),a.of({name:"TSX",extensions:["tsx"],load(){return import("./chunks/dist-CZVE3DRA.js").then(e=>e.javascript({jsx:!0,typescript:!0}))}}),a.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return import("./chunks/dist-CZVE3DRA.js").then(e=>e.javascript({typescript:!0}))}}),a.of({name:"WebAssembly",extensions:["wat","wast"],load(){return import("./chunks/dist-OMO25ZP6.js").then(e=>e.wast())}}),a.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return import("./chunks/dist-MI6YLP72.js").then(e=>e.xml())}}),a.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return import("./chunks/dist-CDMKB4EI.js").then(e=>e.yaml())}}),a.of({name:"APL",extensions:["dyalog","apl"],load(){return import("./chunks/apl-CSDKT72Z.js").then(e=>u(e.apl))}}),a.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return import("./chunks/asciiarmor-JYYPU5BM.js").then(e=>u(e.asciiArmor))}}),a.of({name:"ASN.1",extensions:["asn","asn1"],load(){return import("./chunks/asn1-NRWCZDA6.js").then(e=>u(e.asn1({})))}}),a.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return import("./chunks/asterisk-5OU6D4ZQ.js").then(e=>u(e.asterisk))}}),a.of({name:"Brainfuck",extensions:["b","bf"],load(){return import("./chunks/brainfuck-ID4N4SYC.js").then(e=>u(e.brainfuck))}}),a.of({name:"Cobol",extensions:["cob","cpy"],load(){return import("./chunks/cobol-WCZ7QEGJ.js").then(e=>u(e.cobol))}}),a.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.csharp))}}),a.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return import("./chunks/clojure-KV75UQWC.js").then(e=>u(e.clojure))}}),a.of({name:"ClojureScript",extensions:["cljs"],load(){return import("./chunks/clojure-KV75UQWC.js").then(e=>u(e.clojure))}}),a.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return import("./chunks/css-PDA2RINP.js").then(e=>u(e.gss))}}),a.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return import("./chunks/cmake-GTEP5Y3C.js").then(e=>u(e.cmake))}}),a.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return import("./chunks/coffeescript-TGLBOT6B.js").then(e=>u(e.coffeeScript))}}),a.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return import("./chunks/commonlisp-PNYNPDLF.js").then(e=>u(e.commonLisp))}}),a.of({name:"Cypher",extensions:["cyp","cypher"],load(){return import("./chunks/cypher-HL5QPL4C.js").then(e=>u(e.cypher))}}),a.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return import("./chunks/python-EBCGGHAC.js").then(e=>u(e.cython))}}),a.of({name:"Crystal",extensions:["cr"],load(){return import("./chunks/crystal-S6R6HLKQ.js").then(e=>u(e.crystal))}}),a.of({name:"D",extensions:["d"],load(){return import("./chunks/d-HHJH2HAJ.js").then(e=>u(e.d))}}),a.of({name:"Dart",extensions:["dart"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.dart))}}),a.of({name:"diff",extensions:["diff","patch"],load(){return import("./chunks/diff-MN3A35BY.js").then(e=>u(e.diff))}}),a.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return import("./chunks/dockerfile-NZUWUIBS.js").then(e=>u(e.dockerFile))}}),a.of({name:"DTD",extensions:["dtd"],load(){return import("./chunks/dtd-5343GJ4P.js").then(e=>u(e.dtd))}}),a.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return import("./chunks/dylan-FI2CXSW2.js").then(e=>u(e.dylan))}}),a.of({name:"EBNF",load(){return import("./chunks/ebnf-GNQ77YWA.js").then(e=>u(e.ebnf))}}),a.of({name:"ECL",extensions:["ecl"],load(){return import("./chunks/ecl-MRPUAE2L.js").then(e=>u(e.ecl))}}),a.of({name:"edn",extensions:["edn"],load(){return import("./chunks/clojure-KV75UQWC.js").then(e=>u(e.clojure))}}),a.of({name:"Eiffel",extensions:["e"],load(){return import("./chunks/eiffel-DZROES27.js").then(e=>u(e.eiffel))}}),a.of({name:"Elm",extensions:["elm"],load(){return import("./chunks/elm-4KICRFKQ.js").then(e=>u(e.elm))}}),a.of({name:"Erlang",extensions:["erl"],load(){return import("./chunks/erlang-3IHYC263.js").then(e=>u(e.erlang))}}),a.of({name:"Esper",load(){return import("./chunks/sql-VHRFMUBI.js").then(e=>u(e.esper))}}),a.of({name:"Factor",extensions:["factor"],load(){return import("./chunks/factor-VWBXXV4A.js").then(e=>u(e.factor))}}),a.of({name:"FCL",load(){return import("./chunks/fcl-VYTWUJMI.js").then(e=>u(e.fcl))}}),a.of({name:"Forth",extensions:["forth","fth","4th"],load(){return import("./chunks/forth-ZBO2EH5M.js").then(e=>u(e.forth))}}),a.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return import("./chunks/fortran-5NDCRWIK.js").then(e=>u(e.fortran))}}),a.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return import("./chunks/mllike-ZT6ET7ZH.js").then(e=>u(e.fSharp))}}),a.of({name:"Gas",extensions:["s"],load(){return import("./chunks/gas-SKRMOXFP.js").then(e=>u(e.gas))}}),a.of({name:"Gherkin",extensions:["feature"],load(){return import("./chunks/gherkin-L45YXZLW.js").then(e=>u(e.gherkin))}}),a.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return import("./chunks/groovy-A64GS2UN.js").then(e=>u(e.groovy))}}),a.of({name:"Haskell",extensions:["hs"],load(){return import("./chunks/haskell-LAKB7D56.js").then(e=>u(e.haskell))}}),a.of({name:"Haxe",extensions:["hx"],load(){return import("./chunks/haxe-K2NVDOB6.js").then(e=>u(e.haxe))}}),a.of({name:"HXML",extensions:["hxml"],load(){return import("./chunks/haxe-K2NVDOB6.js").then(e=>u(e.hxml))}}),a.of({name:"HTTP",load(){return import("./chunks/http-Q6DRQIJB.js").then(e=>u(e.http))}}),a.of({name:"IDL",extensions:["pro"],load(){return import("./chunks/idl-MZYNJVLN.js").then(e=>u(e.idl))}}),a.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return import("./chunks/javascript-J73TGKJU.js").then(e=>u(e.jsonld))}}),a.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return import("./chunks/jinja2-NGIK2K7B.js").then(e=>u(e.jinja2))}}),a.of({name:"Julia",extensions:["jl"],load(){return import("./chunks/julia-HXEL2T5G.js").then(e=>u(e.julia))}}),a.of({name:"Kotlin",extensions:["kt","kts"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.kotlin))}}),a.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return import("./chunks/livescript-MV7CI2JZ.js").then(e=>u(e.liveScript))}}),a.of({name:"Lua",extensions:["lua"],load(){return import("./chunks/lua-WHXUAP46.js").then(e=>u(e.lua))}}),a.of({name:"mIRC",extensions:["mrc"],load(){return import("./chunks/mirc-WB43AWF5.js").then(e=>u(e.mirc))}}),a.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return import("./chunks/mathematica-3XOZZCMC.js").then(e=>u(e.mathematica))}}),a.of({name:"Modelica",extensions:["mo"],load(){return import("./chunks/modelica-LLMZPFGA.js").then(e=>u(e.modelica))}}),a.of({name:"MUMPS",extensions:["mps"],load(){return import("./chunks/mumps-6P3HWJH6.js").then(e=>u(e.mumps))}}),a.of({name:"Mbox",extensions:["mbox"],load(){return import("./chunks/mbox-ODYGFKS7.js").then(e=>u(e.mbox))}}),a.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return import("./chunks/nginx-TCGKQTRW.js").then(e=>u(e.nginx))}}),a.of({name:"NSIS",extensions:["nsh","nsi"],load(){return import("./chunks/nsis-ULWUOJFW.js").then(e=>u(e.nsis))}}),a.of({name:"NTriples",extensions:["nt","nq"],load(){return import("./chunks/ntriples-5PLBI5OV.js").then(e=>u(e.ntriples))}}),a.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.objectiveC))}}),a.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.objectiveCpp))}}),a.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return import("./chunks/mllike-ZT6ET7ZH.js").then(e=>u(e.oCaml))}}),a.of({name:"Octave",extensions:["m"],load(){return import("./chunks/octave-QF2S3NL6.js").then(e=>u(e.octave))}}),a.of({name:"Oz",extensions:["oz"],load(){return import("./chunks/oz-JFIVFFH2.js").then(e=>u(e.oz))}}),a.of({name:"Pascal",extensions:["p","pas"],load(){return import("./chunks/pascal-OWGRTCQH.js").then(e=>u(e.pascal))}}),a.of({name:"Perl",extensions:["pl","pm"],load(){return import("./chunks/perl-4B3IWVVO.js").then(e=>u(e.perl))}}),a.of({name:"Pig",extensions:["pig"],load(){return import("./chunks/pig-ABEBH4MI.js").then(e=>u(e.pig))}}),a.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return import("./chunks/powershell-H32XE7TL.js").then(e=>u(e.powerShell))}}),a.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return import("./chunks/properties-NN644MMA.js").then(e=>u(e.properties))}}),a.of({name:"ProtoBuf",extensions:["proto"],load(){return import("./chunks/protobuf-YKWQK2J3.js").then(e=>u(e.protobuf))}}),a.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return import("./chunks/pug-3JOT7N4K.js").then(e=>u(e.pug))}}),a.of({name:"Puppet",extensions:["pp"],load(){return import("./chunks/puppet-JZQ5WPEV.js").then(e=>u(e.puppet))}}),a.of({name:"Q",extensions:["q"],load(){return import("./chunks/q-GKCGKCE6.js").then(e=>u(e.q))}}),a.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return import("./chunks/r-YAF6Y5QO.js").then(e=>u(e.r))}}),a.of({name:"RPM Changes",load(){return import("./chunks/rpm-IEV7TSLR.js").then(e=>u(e.rpmChanges))}}),a.of({name:"RPM Spec",extensions:["spec"],load(){return import("./chunks/rpm-IEV7TSLR.js").then(e=>u(e.rpmSpec))}}),a.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return import("./chunks/ruby-NU4P45PS.js").then(e=>u(e.ruby))}}),a.of({name:"SAS",extensions:["sas"],load(){return import("./chunks/sas-GEDX67ET.js").then(e=>u(e.sas))}}),a.of({name:"Scala",extensions:["scala"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.scala))}}),a.of({name:"Scheme",extensions:["scm","ss"],load(){return import("./chunks/scheme-FTLOWKPC.js").then(e=>u(e.scheme))}}),a.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return import("./chunks/shell-HUFRKFSJ.js").then(e=>u(e.shell))}}),a.of({name:"Sieve",extensions:["siv","sieve"],load(){return import("./chunks/sieve-P5QUDVYO.js").then(e=>u(e.sieve))}}),a.of({name:"Smalltalk",extensions:["st"],load(){return import("./chunks/smalltalk-2SORJNQI.js").then(e=>u(e.smalltalk))}}),a.of({name:"Solr",load(){return import("./chunks/solr-M22TGAR5.js").then(e=>u(e.solr))}}),a.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return import("./chunks/mllike-ZT6ET7ZH.js").then(e=>u(e.sml))}}),a.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return import("./chunks/sparql-4M3KL752.js").then(e=>u(e.sparql))}}),a.of({name:"Spreadsheet",alias:["excel","formula"],load(){return import("./chunks/spreadsheet-3K23LA4N.js").then(e=>u(e.spreadsheet))}}),a.of({name:"Squirrel",extensions:["nut"],load(){return import("./chunks/clike-SQSZHWNN.js").then(e=>u(e.squirrel))}}),a.of({name:"Stylus",extensions:["styl"],load(){return import("./chunks/stylus-O62V3KSX.js").then(e=>u(e.stylus))}}),a.of({name:"Swift",extensions:["swift"],load(){return import("./chunks/swift-WCLCLGMR.js").then(e=>u(e.swift))}}),a.of({name:"sTeX",load(){return import("./chunks/stex-QZDAQUY2.js").then(e=>u(e.stex))}}),a.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return import("./chunks/stex-QZDAQUY2.js").then(e=>u(e.stex))}}),a.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return import("./chunks/verilog-4T6ETXIP.js").then(e=>u(e.verilog))}}),a.of({name:"Tcl",extensions:["tcl"],load(){return import("./chunks/tcl-JLMU6WOK.js").then(e=>u(e.tcl))}}),a.of({name:"Textile",extensions:["textile"],load(){return import("./chunks/textile-4CHDKZ4T.js").then(e=>u(e.textile))}}),a.of({name:"TiddlyWiki",load(){return import("./chunks/tiddlywiki-DKMCZZQ4.js").then(e=>u(e.tiddlyWiki))}}),a.of({name:"Tiki wiki",load(){return import("./chunks/tiki-F4JIG36Q.js").then(e=>u(e.tiki))}}),a.of({name:"TOML",extensions:["toml"],load(){return import("./chunks/toml-YH4LOADH.js").then(e=>u(e.toml))}}),a.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return import("./chunks/troff-YQ2KV5NT.js").then(e=>u(e.troff))}}),a.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return import("./chunks/ttcn-ZHRCVFJY.js").then(e=>u(e.ttcn))}}),a.of({name:"TTCN_CFG",extensions:["cfg"],load(){return import("./chunks/ttcn-cfg-KJOVTY4X.js").then(e=>u(e.ttcnCfg))}}),a.of({name:"Turtle",extensions:["ttl"],load(){return import("./chunks/turtle-535P5N6I.js").then(e=>u(e.turtle))}}),a.of({name:"Web IDL",extensions:["webidl"],load(){return import("./chunks/webidl-P6MJSJ6J.js").then(e=>u(e.webIDL))}}),a.of({name:"VB.NET",extensions:["vb"],load(){return import("./chunks/vb-76UMQHOT.js").then(e=>u(e.vb))}}),a.of({name:"VBScript",extensions:["vbs"],load(){return import("./chunks/vbscript-CGNDTK6Z.js").then(e=>u(e.vbScript))}}),a.of({name:"Velocity",extensions:["vtl"],load(){return import("./chunks/velocity-VSJDO5T5.js").then(e=>u(e.velocity))}}),a.of({name:"Verilog",extensions:["v"],load(){return import("./chunks/verilog-4T6ETXIP.js").then(e=>u(e.verilog))}}),a.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return import("./chunks/vhdl-T7FNAXUN.js").then(e=>u(e.vhdl))}}),a.of({name:"XQuery",extensions:["xy","xquery"],load(){return import("./chunks/xquery-SWBZ3WMA.js").then(e=>u(e.xQuery))}}),a.of({name:"Yacas",extensions:["ys"],load(){return import("./chunks/yacas-CV2APROL.js").then(e=>u(e.yacas))}}),a.of({name:"Z80",extensions:["z80"],load(){return import("./chunks/z80-3KFNVM4M.js").then(e=>u(e.z80))}}),a.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return import("./chunks/mscgen-2OPNNYFH.js").then(e=>u(e.mscgen))}}),a.of({name:"X\xF9",extensions:["xu"],load(){return import("./chunks/mscgen-2OPNNYFH.js").then(e=>u(e.xu))}}),a.of({name:"MsGenny",extensions:["msgenny"],load(){return import("./chunks/mscgen-2OPNNYFH.js").then(e=>u(e.msgenny))}}),a.of({name:"Vue",extensions:["vue"],load(){return import("./chunks/dist-LJ3VACYM.js").then(e=>e.vue())}}),a.of({name:"Angular Template",load(){return import("./chunks/dist-7U47HMB3.js").then(e=>e.angular())}})];var qe;async function xr(){return qe!=null||(qe=(await import("./chunks/dist-VXSQVCQN.js")).oneDark),qe}async function kr(e){return e=e.toLowerCase(),e=="plain text"?[]:await xt.find(t=>t.name.toLowerCase()==e).load()}var kt=[...xt.map(e=>e.name),"Plain Text"].sort(),ze=class{constructor(){this.compartements={language:new J,tabSize:new J,theme:new J,readOnly:new J,lineWrapping:new J},this.initState,this.view,this.wrap=!0}async init(t,{doc:n="",lang:r="Plain Text",darkTheme:o=!1,tabSize:i=4,tabChar:s=" ",readOnly:l=!1,wrap:c=!0}={}){this.wrap=c,this.initState=R.create({extensions:[yr,this.compartements.lineWrapping.of(c?y.lineWrapping:[]),this.compartements.theme.of(o?await xr():y.theme({})),pe.of([Zn]),this.compartements.language.of(await kr(r)),this.compartements.tabSize.of(oe.of(s.repeat(i))),this.compartements.readOnly.of(R.readOnly.of(l))]}),this.view=new y({state:this.initState,doc:n,parent:t})}async changeLanguage(t){this.view.dispatch({effects:this.compartements.language.reconfigure(await kr(t))})}changeTabSize(t,n=" "){this.view.dispatch({effects:this.compartements.tabSize.reconfigure(oe.of(n.repeat(t)))})}async changeTheme(t=!1){this.view.dispatch({effects:this.compartements.theme.reconfigure(t?await xr():y.theme({}))})}rawText(){return this.view.state.doc.toString()}setText(t){this.view.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:t}})}currentLang(){return this.compartements.language.get(this.view.state)}toggleWrap(){this.wrap=!this.wrap,this.view.dispatch({effects:this.compartements.lineWrapping.reconfigure(this.wrap?y.lineWrapping:[])})}makeReadOnly(){return this.view.dispatch({effects:this.compartements.readOnly.reconfigure(R.readOnly.of(!0))})}};var br=new Tt("scripts/lzma/lzma_worker.js"),xi=document.getElementById("cm-editor"),b=new ze;async function Sr(e,t,n,r,o){await b.init(xi,{lang:e,tabSize:t,darkTheme:n,readOnly:r,wrap:o})}async function bt(e,t){if(e==null&&(e=location.hash.substring(1)),e.length==0)return"";let r=await(await fetch("data:application/octet-stream;base64,"+e)).blob();return new Promise((o,i)=>{let s=new FileReader;s.addEventListener("load",()=>{let l=Array.from(new Uint8Array(s.result));br.decompress(l,function(c,f){if(f)return i(f);o(c)},t)}),s.addEventListener("error",()=>i()),s.readAsArrayBuffer(r)})}async function vr(e,t=1,n){return e==""?"":new Promise((r,o)=>{br.compress(e,t,function(i,s){if(s)return o(s);let l=new FileReader;l.addEventListener("load",()=>{let c=l.result.substr(l.result.indexOf(",")+1);r(c)}),l.addEventListener("error",()=>o()),l.readAsDataURL(new Blob([new Uint8Array(i)]))},n)})}var St=document.getElementById("error-dialog"),ki=document.getElementById("error-dialog-content"),Ne=document.getElementById("about-dialog");function wr(e,t){let n=t.getBoundingClientRect();n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width||t.close()}St.addEventListener("click",function(e){wr(e,St)});Ne.addEventListener("click",function(e){wr(e,Ne)});function fe(e){ki.innerHTML=e,St.showModal()}function wt(e,t,n){e?(document.body.classList.add("dark"),t.setAttribute("hidden",""),n.removeAttribute("hidden")):(document.body.classList.remove("dark"),t.removeAttribute("hidden"),n.setAttribute("hidden",""))}var j=document.getElementById("select-languages"),$=document.getElementById("select-tabsize"),Ar=document.getElementById("select-compression"),vt=document.getElementById("toggle-line-wrap"),Lr=document.getElementById("line-wrap-icon"),Cr=document.getElementById("line-no-wrap-icon"),ee=!0,bi=document.getElementById("select-theme"),Lt=document.getElementById("select-darkmode-icon"),Ct=document.getElementById("select-lightmode-icon"),Si=document.getElementById("edit-link"),vi=document.getElementById("about-link"),he=window.matchMedia("(prefers-color-scheme: dark)");ee=!he.matches;wt(he.matches,Lt,Ct);j.addEventListener("change",async()=>await b.changeLanguage(j.value));$.addEventListener("change",()=>b.changeTabSize($.value));bi.addEventListener("click",()=>{b.changeTheme(ee),wt(ee,Lt,Ct),ee=!ee});he.addEventListener("change",e=>{b.changeTheme(e.matches),wt(e.matches,Lt,Ct),ee=!e.matches});Mr();vt.addEventListener("click",()=>{b.toggleWrap(),Mr()});function Mr(){b.wrap?(vt.classList.add("active"),Lr.removeAttribute("hidden"),Cr.setAttribute("hidden","")):(vt.classList.remove("active"),Lr.setAttribute("hidden",""),Cr.removeAttribute("hidden"))}Si.addEventListener("click",e=>(e.preventDefault(),window.open(location.href.replace("?embedded","").replace("embedded","")),!1));vi.addEventListener("click",e=>(e.preventDefault(),Ne.showModal(),!1));var Ge=e=>e.toString().normalize("NFD").replaceAll("+","p").replaceAll("#","s").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"),Br=document.getElementById("progress-bar"),wi=e=>Br.style.width=100*e+"%",Li=document.getElementById("share-url"),Ci=document.getElementById("share-markdown"),Ai=document.getElementById("share-embed"),Dr=document.getElementById("header-controls"),Er=document.getElementById("copy-form"),I=document.getElementById("copy-form-input"),Mi=document.getElementById("copy-form-copy"),Bi=document.getElementById("copy-form-cancel");function Di(){Dr.setAttribute("hidden",""),Er.removeAttribute("hidden")}function At(){I.value="",Er.setAttribute("hidden",""),Dr.removeAttribute("hidden")}function Mt(e){let t=location.origin+location.pathname,n=new URLSearchParams;j.value!="Plain Text"&&n.append("l",Ge(j.value));let r=parseInt($.value,10);return r!=4&&n.append("t",r),b.wrap||n.append("nw","1"),n.toString()!=""&&(t+="?"+n.toString()),t+="#"+e,t}async function Bt(){Di();let e="";try{e=await vr(b.rawText(),Ar.value,wi)}catch{fe("Could not encode document")}finally{return Br.style.width="0",e}}Li.addEventListener("click",async()=>{let e=await Bt();I.value=Mt(e),I.select()});Ci.addEventListener("click",async()=>{let e=await Bt();I.value="[paste]("+Mt(e)+")",I.select()});Ai.addEventListener("click",async()=>{let e=await Bt(),t=Math.ceil(b.view.contentHeight)+document.querySelector("footer").clientHeight;I.value='<iframe style="border:1px solid #d0d7de" width="100%" height="'+t+'" src="'+Mt(e)+'"></iframe>',I.select()});Mi.addEventListener("click",()=>{navigator.clipboard.writeText(I.value),At()});Bi.addEventListener("click",()=>At());I.addEventListener("keydown",e=>{e.key=="Escape"&&At()});var Et=new URLSearchParams(document.location.search),Dt=Et.get("l")||"plain-text";kt.map(e=>Ge(e)).includes(Dt)||(Dt="plain-text");var te=parseInt(Et.get("t")||4,10);te==1||te==2||te==4||te==8||(te=4);var Ei=Et.has("nw");j.innerHTML=kt.sort((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())).map(e=>`<option ${Ge(e)==Dt?"selected":""}>${e}</option>`).join("");$.value=te;await Sr(j.value,$.value,he.matches,document.body.classList.contains("embedded"),!Ei);bt().then(e=>b.setText(e)).catch(e=>{fe("Could not decode document")});window.addEventListener("hashchange",()=>bt().then(e=>b.setText(e)).catch(e=>{fe("Could not decode document")}));
